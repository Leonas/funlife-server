<!DOCTYPE html>
<html>
<head>

    <script src="jquery-1.10.2.js"></script>
    <script src="base64.js"></script>
    <script src="sha1.js"></script>
    <title></title>
</head>
<body>
http://cloudinary.com/documentation/upload_images#request_authentication

<input type="file" id="photo_uploader" class='hidden' name="files[]" multiple/>
      <script>

          var cloudinary = 'https://api.cloudinary.com/v1_1/funlife/image/upload';
          var unix_timestamp = Math.round((new Date()).getTime() / 1000);
          var api_key = 221816386951751;
          var secret_key = 'p0HsqkrLaNZpg3nruhEfWl4-tuc';
          var shaObj = new jsSHA('timestamp=' + unix_timestamp + secret_key, "TEXT");
          var sha1_hash = shaObj.getHash("SHA-1", "HEX");


          $('#photo_uploader').click();

              document.getElementById('photo_uploader').addEventListener('change', handleFileSelect, false);

              function handleFileSelect (evt) {
                  var files = evt.target.files; // FileList object
                  // Loop through the FileList and render image files as thumbnails.
                  for(var i = 0, current_file; current_file = files[i]; i++) {
                      // Only process image files.
                      if(!current_file.type.match('image.*')) {
                          continue;
                      }

                      var reader = new FileReader();

                      // Closure to capture the file information.
                      reader.onload = (function (theFile) {
                          return function (e) {

                              $.ajax({
                                  url        : cloudinary,
                                  type       : "POST",
                                  data       : {
                                      file     : e.target.result,
                                      api_key  : api_key,
                                      timestamp: unix_timestamp,
                                      signature: sha1_hash
                                  },
                                  processData: false,
                                  contentType: false,
                                  success    : function (response) {
                                      var photo = {'photo': JSON.parse(response)};
                                      photo.photo.processed_at = photo.photo.created_at;
                                      delete photo.photo.created_at;
//                                      $.post_with_token({
//                                          url : '/photos/',
//                                          data: photo
//                                      });
                                  }
                              });

                          };


                      })(current_file);

                      // Read in the image file as a data URL.
                      reader.readAsDataURL(current_file);

                  }
              }
      </script>
</body>
</html>